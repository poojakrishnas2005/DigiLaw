<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>DigiLaw â€“ Legal Awareness Platform</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<script src="https://cdn.tailwindcss.com"></script>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>

<body class="bg-gray-50 font-sans">

<header class="bg-indigo-900 text-white p-6 sticky top-0 shadow-lg z-10">
  <h1 class="text-2xl font-bold">DigiLaw</h1>
  <p class="text-xs opacity-75">Law at your fingertips</p>

  <div class="flex gap-2 mt-4">
    <input id="lawSearch" onkeyup="filterContent()" placeholder="Search incident or law..."
      class="flex-1 p-3 rounded-lg text-gray-900" />
    <select onchange="setLang(this.value)" class="p-3 rounded-lg text-gray-900">
      <option value="en">EN</option>
      <option value="hi">à¤¹à¤¿à¤‚à¤¦à¥€</option>
    </select>
  </div>

  <button onclick="login()" class="mt-4 bg-yellow-400 text-black px-4 py-2 rounded">
    Login with Google
  </button>
</header>

<main class="max-w-6xl mx-auto p-6 space-y-10">

<section>
<h2 class="text-xl font-bold mb-4" id="incidentTitle">Choose an Incident</h2>
<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4">
  <button onclick="showInfo('accident')" class="incident-card bg-white p-5 rounded-xl shadow">ğŸš— Road Accident</button>
  <button onclick="showInfo('harassment')" class="incident-card bg-white p-5 rounded-xl shadow">ğŸš¨ Sexual Harassment</button>
  <button onclick="showInfo('cyber')" class="incident-card bg-white p-5 rounded-xl shadow">ğŸ’» Cyber Crime</button>
  <button onclick="showInfo('domestic')" class="incident-card bg-white p-5 rounded-xl shadow">ğŸ  Domestic Violence</button>
</div>
</section>

<section id="output" class="hidden bg-white p-6 rounded-xl shadow space-y-4">
<h3 id="law" class="font-bold text-indigo-900"></h3>
<p id="description"></p>

<h4 class="font-semibold">What You Should Do</h4>
<ul id="actions" class="list-disc pl-6"></ul>

<h4 class="font-semibold">Evidence to Preserve</h4>
<ul id="evidence" class="list-disc pl-6"></ul>

<button onclick="generateFIR()" class="bg-indigo-900 text-white px-4 py-2 rounded">
Generate FIR Draft
</button>

<textarea id="firDraft" class="w-full mt-4 p-3 border rounded hidden"></textarea>
</section>

</main>

<!-- Dialogflow Messenger -->
<script src="https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"></script>
<df-messenger
  intent="WELCOME"
  chat-title="DigiLaw Assistant"
  agent-id="PASTE-YOUR-DIALOGFLOW-AGENT-ID"
  language-code="en">
</df-messenger>

<script>
/* ğŸ” Firebase CONFIG â€“ YOU MUST FILL THIS */
firebase.initializeApp({
  apiKey: "YOUR_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  projectId: "YOUR_PROJECT"
});

const auth = firebase.auth();
const db = firebase.firestore();

function login() {
  auth.signInWithPopup(new firebase.auth.GoogleAuthProvider());
}

/* ğŸŒ Language Support */
const text = {
  en: { choose: "Choose an Incident" },
  hi: { choose: "à¤˜à¤Ÿà¤¨à¤¾ à¤šà¥à¤¨à¥‡à¤‚" }
};

function setLang(l) {
  document.getElementById("incidentTitle").innerText = text[l].choose;
}

/* ğŸ“„ FIR AUTO-DRAFT */
function generateFIR() {
  const fir = `
To,
The Station House Officer,

Subject: FIR regarding ${currentType}

I respectfully submit that the above incident occurred and legal action may be taken.

Yours sincerely,
Citizen
`;
  const box = document.getElementById("firDraft");
  box.value = fir;
  box.classList.remove("hidden");
}

/* ğŸ” Filter */
function filterContent() {
  let v = lawSearch.value.toLowerCase();
  document.querySelectorAll(".incident-card").forEach(c=>{
    c.style.display = c.innerText.toLowerCase().includes(v)?"block":"none";
  });
}

/* ğŸ§  Incident Data */
let currentType = "";
const data = {
  accident:{law:"Road Accident",description:"Legal help is mandatory.",actions:["Medical help","Police report"],evidence:["Photos","Reports"]},
  harassment:{law:"Sexual Harassment",description:"Punishable offense.",actions:["Safety","FIR"],evidence:["Messages"]},
  cyber:{law:"Cyber Crime",description:"IT Act applies.",actions:["Preserve data"],evidence:["Screenshots"]},
  domestic:{law:"Domestic Violence",description:"Illegal abuse.",actions:["Helpline"],evidence:["Medical proof"]}
};

function showInfo(t){
  currentType=t;
  output.classList.remove("hidden");
  law.innerText=data[t].law;
  description.innerText=data[t].description;
  actions.innerHTML=data[t].actions.map(a=>`<li>${a}</li>`).join("");
  evidence.innerHTML=data[t].evidence.map(e=>`<li>${e}</li>`).join("");
}
</script>

</body>
</html>
